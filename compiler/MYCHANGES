Submission 5a
=============

Changes we made for enhancing the compiler from level 0 to level 1:

parser.yy and scanner.ll
------------------------

1. Added the lexemes and tokens that we had added for level 1 while coding the interpreter.

ast.hh and ast.cc
-----------------

1. Added classes for Goto_Ast, If_Ast and Comparison_Ast. Wrote methods for these classes. Along with the methods that we had written last time for the interpreter, this time we also wrote methods for compile(), which generates Code_for_Ast objects.

icode.cc and icode.hh
---------------------

1. Added two new intermediate code statement classes Move_IC_Stmt_2 and Move_IC_Stmt_3. The former is for intermediate code statements that have two operands and one result register, like bne, slt, sle, sgt and sge. The latter is for intermediate code statements that have only one operand and no result register. Move_IC_Stmt is for intermediate code statements that have only one operand and one result register.

2. Wrote the methods for the above classes, including print_icode() and print_assembly().

reg-alloc.cc and reg-alloc.hh
-----------------------------

1. Extended the initialize_instruction_table() method of the Machine_Description class by adding the instructions slt, sgt, sle, sge, seq, bne and goto.

2. Added the clause "!used_for_expr_result" to the is_free() method of the Register_Descriptor class. This checks that the register is not being used anywhere else. Only then can it be allocated.


local-environment.cc and local-environment.hh
---------------------------------------------

1. Added result enums (int_result and goto_result) and evaluation functions that we had written while making the interpreter.


Submission 5b
=============

Changes we made for supporting local register allocation for level 1:


ast.cc and ast.hh
-----------------

1. Added compile_and_optimize_ast() functions for each of the classes we added in the previous submission.


reg-alloc.cc and reg-alloc.hh
-----------------------------

1. Added 'c2r' to the Lra_Scenario enum.

2. Added a case for c2r (constant to register) in the optimize_lra() function.

3. Added a function 'get_lra_table_size' that returns the length of the lra_symbol_list for a Register_Descriptor.

4. Modified the 'mc_2m' case to take care of the case when the destination_register already is storing the value for more than one symbol table entry. Specifically, we added another clause in the 'else if' condition which checked that the return value of get_lra_table_size() is <= 1.

5. Added a function to get a reference to the lra_symbol_list of a Register_Descriptor.

6. Modified the function get_new_register to free a register in case lra option is enabled and there are no free registers left at that point in the program. We only free a register if it is holding exactly one symbol table entry. e.g. see 'test_files/ExhaustTemps.ecfg'.
